#!/usr/bin/env ruby

require 'filewatcher'
require 'backup'

Backup::Config.load(root_path: File.expand_path(File.dirname(__FILE__) + '/../Backup'))

FileWatcher.new("Sync/").watch do |filename|
  puts 'file changed: ' + filename
  Backup::Model.find_by_trigger('my_backup').first.perform!
end
